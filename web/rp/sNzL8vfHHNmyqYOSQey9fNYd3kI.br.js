var __awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(o){if(e)throw new TypeError("Generator is already executing.");while(f&&(f=0,o[0]&&(r=0)),r)try{if(e=1,u&&(i=o[0]&2?u["return"]:o[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,o[1])).done)return i;(u=0,i)&&(o=[o[0]&2,i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++;u=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(o[0]===6&&r.label<i[1]){r.label=i[1];i=o;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(o);break}i[2]&&r.ops.pop();r.trys.pop();continue}o=t.call(n,r)}catch(s){o=[6,s];u=0}finally{e=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,u,i,f;return f={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f},SydWelcomeScreen;(function(n){function kt(n,i,u){var o,s,f,e;if((i===void 0&&(i=undefined),u===void 0&&(u=undefined),n&&CIB)&&!ft()&&(f=(o=n.shadowRoot)===null||o===void 0?void 0:o.querySelector("cib-conversation"),f)&&(e=(s=f.shadowRoot)===null||s===void 0?void 0:s.querySelector(rt),e))if(yt){if(SydFSCHelper.setFreeSydneyData(),CIB.onFreeSydneyPersonaChanged)CIB.onFreeSydneyPersonaChanged(function(o){var s=document.getElementById("b_sydWelcomeTemplate_");s&&s.parentNode.removeChild(s);pt&&(o&&o.id!=="copilot"?(CIB.config.features.enablePrivacyProtectedConversation||(CIB.config.features.enablePrivacyProtectedConversation=!0),CIB.setPrivacyForConversation(!0)):(CIB.config.features.enablePrivacyProtectedConversation=vt,CIB.setPrivacyForConversation(!1)));o&&o.type!=="Copilot"?dt(n,e,f,o,i,u):r&&b?b.appendChild(r):(t=null,ut(n,e,f,i,u),r=document.getElementById("b_sydWelcomeTemplate_"),b=r===null||r===void 0?void 0:r.parentNode)})}else ut(n,e,f,i,u)}function ut(n,i,r,f,e){var o;f===void 0&&(f=undefined);e===void 0&&(e=undefined);t||(t=(o=SydWelcomeScreenBase.getWelcomeContainer(d))!==null&&o!==void 0?o:k(),SydWelcomeScreenBase.setTileContainer(t,wt&&it,f,e));t&&(et(n),ot(i,r,w,u))}function dt(n,i,r,f,e,o){var s,h,c;e===void 0&&(e=undefined);o===void 0&&(o=undefined);f.type!=="Custom"||f.welcomeTiles&&((s=f.welcomeTiles)===null||s===void 0?void 0:s.length)!==0||(f.welcomeTiles=FreeSydneyHelper.getDefaultCustomWelcomeTiles());h=function(){return f.welcomeTiles};c=f.welcomeTiles?function(){return Promise.resolve(f.welcomeTiles)}:null;t=gt(f);f.type==="Copilot"?SydWelcomeScreenBase.setTileContainer(t,!1,e,o):SydWelcomeScreenBase.setTileContainer(t,!1,c,h);t&&(et(n),ot(i,r,w,u))}function gt(n){var c,t,r,l,a,u,e,o,v,y;if(!n)return k();t=sj_ce(i,g,nt);t.setAttribute(tt,"2");var s=sj_ce(i,null,"b_wlcmHdr"),p=(c=n.type)===null||c===void 0?void 0:c.toLowerCase(),h=sj_ce(i,null,"b_wlcmLogo "+p);return h.setAttribute("role","img"),h.setAttribute("aria-label","Bing Logo"),h.setAttribute("tab-index","0"),r=sj_ce(i,null,"b_wlcmDesc"),r.innerHTML=n.welcomeHeader?n.welcomeHeader:n.displayName,r.setAttribute("role","heading"),r.setAttribute("aria-level","2"),s.appendChild(h),s.appendChild(r),bt&&(l=n.type!=="Custom"?"Microsoft":n.authorName,a=sj_ce(i,null,"b_wlcmAuthorText"),a.innerHTML=f.freeSydneyWelcomeAuthorText.replace("{0}",l),s.appendChild(a),u=_d.querySelector("cib-serp"),(u===null||u===void 0?void 0:u.shadowRoot)&&(e=u.shadowRoot.querySelector("cib-conversation"),(e===null||e===void 0?void 0:e.shadowRoot)&&(o=e.shadowRoot.querySelector("cib-welcome-container"),(o===null||o===void 0?void 0:o.shadowRoot)&&(v=o.shadowRoot.querySelector(".preview-container .preview-disclaimer .disclaimer span"),v&&(v.innerHTML=f.sydneyGptCreatorWelcomeMessage.replace("{0}",l)))))),y=sj_ce(i,null,"b_wlcmTileCont"),t.appendChild(s),t.appendChild(y),t}function ni(){var n;return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return t||(t=(n=SydWelcomeScreenBase.getWelcomeContainer(d,"b_sydWelcomeTemplate",!1))!==null&&n!==void 0?n:k(),SydWelcomeScreenBase.setTileContainer(t,!1,null,null,null,!0)),[2]})})}function k(){var r=sj_ce(i,g,nt),u,n,t,e;return r.setAttribute(tt,"2"),u=sj_ce(i,null,"b_wlcmHdr"),n=sj_ce(i,null,"b_wlcmLogo"),n.setAttribute("role","img"),n.setAttribute("aria-label","Bing Logo"),n.setAttribute("tab-index","0"),t=sj_ce(i,null,"b_wlcmDesc"),t.innerHTML=f?f.zeroInputDescription:"",t.setAttribute("role","heading"),t.setAttribute("aria-level","2"),u.appendChild(n),u.appendChild(t),e=sj_ce(i,null,"b_wlcmTileCont"),r.appendChild(u),r.appendChild(e),r}function ft(){var n,i,t;return lt?(n=localStorage===null||localStorage===void 0?void 0:localStorage.getItem(ht),n)?(i=new Date(parseInt(n)),t=Math.ceil((Date.now()-i.valueOf())/864e5),0<t&&t<=14):!0:!1}function et(n){t.setAttribute("slot",w);t.id=t.getAttribute("id")+"_";n.appendChild(t)}function ot(n,t,i,r){var u=SydWelcomeScreenBase.createSlot(r),f=SydWelcomeScreenBase.createSlot(i,u);n.prepend(u);t.append(f);t.removeAttribute("empty")}function st(n,t){var r,f,e,i,o,s;if((t===void 0&&(t=0),!(t>3))&&(e=(r=n.shadowRoot)===null||r===void 0?void 0:r.querySelector("cib-conversation"),e)){if(i=(f=e.shadowRoot)===null||f===void 0?void 0:f.querySelector(rt),!i){setTimeout(function(){st(n,t+1)},12);return}o=SydWelcomeScreenBase.createSlot(u);s=i.querySelector("slot[name=".concat(u));s||i.prepend(o)}}var e,o,s,h,c,l,a,v,y,p,d="#b_sydWelcomeTemplate",g="b_sydWelcomeTemplate",nt="b_wlcmCont",i="div",w="wlcmCntnr",u="wlcmCntnrChld",tt="data-priority",f=_w._sydConvTranslation,ht="cib__firstTimeAccessed",ct=SydFSCHelper.getConfigOrDefault((e=_w._sydConvConfig)===null||e===void 0?void 0:e.isBingChatForEnterprise,!1),lt=SydFSCHelper.getConfigOrDefault((o=_w._sydConvConfig)===null||o===void 0?void 0:o.enableEduStarterMessage,!1),it=SydFSCHelper.getConfigOrDefault((s=_w._sydConvConfig)===null||s===void 0?void 0:s.isCopilotChat,!1),at=SydFSCHelper.getConfigOrDefault(((h=_w._sydConvConfig)===null||h===void 0?void 0:h.enableCopilotLayout)||((c=_w._sydConvConfig)===null||c===void 0?void 0:c.isCCP),!1),rt=ct&&!at&&!it?"cib-welcome-container":"#cib-chat-main",vt=SydFSCHelper.getConfigOrDefault((l=_w._sydConvConfig)===null||l===void 0?void 0:l.enablePrivacyProtectedConversation,!1),yt=SydFSCHelper.getConfigOrDefault((a=_w._sydConvConfig)===null||a===void 0?void 0:a.enableFreeSydney,!1),pt=SydFSCHelper.getConfigOrDefault((v=_w._sydConvConfig)===null||v===void 0?void 0:v.enableFreeSydneyPrivacy,!1),wt=SydFSCHelper.getConfigOrDefault((y=_w._sydConvConfig)===null||y===void 0?void 0:y.isMobileHost,!1),bt=SydFSCHelper.getConfigOrDefault((p=_w._sydConvConfig)===null||p===void 0?void 0:p.enableGPTCreator,!1),t,r,b;n.setContent=kt;n.isEduStarterEnabled=ft;n.addWelcomeContainerChildSlot=st;sj_evt.fire("sydWelcomeScreen");sj_evt.bind("pf_zeroip",ni,1)})(SydWelcomeScreen||(SydWelcomeScreen={}))